<?xml version="1.0" encoding="ASCII" standalone="yes"?>
<!-- replaces functionality of pTransponderAIS -->
<message_set>
  <message>
    <name>COOPNAV_CNA_STATUS</name>
      <id>24</id>
    <trigger>publish</trigger>
    <trigger_moos_var>CREATE_STATUS</trigger_moos_var>
    <size>32</size>
    <header>
      <id>24</id>
      <time>
        <name>time</name>
      </time>
    </header>
    <layout>
      <int>
		<name>vehicle_id</name>
		<moos_var>VEHICLE_ID</moos_var>
		<max>32</max>
		<min>0</min>
      </int>
      <enum algorithm="to_lower">
        <name>type</name>
        <moos_var>VEHICLE_TYPE</moos_var>
        <value>kayak</value>
        <value>asc</value>
        <value>auv</value>
        <value>ship</value>
        <value>buoy</value>
        <value>glider</value>
        <value>unknown</value>
      </enum>
      <float>
        <name>nav_x</name>
        <moos_var>NAV_X</moos_var>
        <max>100000</max>
        <min>-100000</min>
        <precision>1</precision>
      </float>
      <float>
        <name>nav_y</name>
        <moos_var>NAV_Y</moos_var>
        <max>100000</max>
        <min>-100000</min>
        <precision>1</precision>
      </float>
      <float algorithm="angle_0_360">
        <name>hdg</name>
        <moos_var>NAV_HEADING</moos_var>
        <max>360</max>
        <min>0</min>
        <precision>0</precision>
   		<!-- was precision 2 before further compression -->
      </float>
      <float>
        <name>depth</name>
        <moos_var>NAV_DEPTH</moos_var>
        <max>5000</max>
        <min>-10</min>
        <precision>1</precision>
      </float>
      <float>
        <name>rangea</name>
        <moos_var>RANGEA</moos_var>
        <max>2000</max>
        <min>0</min>
        <precision>1</precision>
      </float>
      <int>
        <name>rangeaid</name>
        <moos_var>RANGEAID</moos_var>
        <max>32</max>
        <min>0</min>
      </int>
      <float>
        <name>rangea_dx</name>
        <moos_var>RANGEA_DX</moos_var>
        <max>100</max>
        <min>-100</min>
        <precision>1</precision>
      </float>
      <float>
        <name>rangea_dy</name>
        <moos_var>RANGEA_DY</moos_var>
        <max>100</max>
        <min>-100</min>
        <precision>1</precision>
      </float>
      <float>
        <name>rangeb</name>
        <moos_var>RANGEB</moos_var>
        <max>2000</max>
        <min>0</min>
        <precision>1</precision>
      </float>
      <int>
        <name>rangebid</name>
        <moos_var>RANGEBID</moos_var>
        <max>32</max>
        <min>0</min>
      </int>
      <float>
        <name>rangeb_dx</name>
        <moos_var>RANGEB_DX</moos_var>
        <max>100</max>
        <min>-100</min>
        <precision>1</precision>
      </float>
      <float>
        <name>rangeb_dy</name>
        <moos_var>RANGEB_DY</moos_var>
        <max>100</max>
        <min>-100</min>
        <precision>1</precision>
      </float>
    </layout>
    <!-- decoding -->
    <on_receipt>
<!-- should be:
			sscanf(msg.m_sVal.c_str(),"ID=%d,CNA_X=%lf,CNA_Y=%lf,CNA_Z=%lf,CNA_TIME=%lf,HEADING=%lf,VELOCITY=%lf,RANGEA=%lf,RANGEAID=%d,DTIMEA=%lf,DXA=%lf,DYA=%lf,RANGEB=%lf,RANGEBID=%d,DTIMEB=%lf,DXB=%lf,DYB=%lf",&cnano,&cnax,&cnay,&cnadepth,&cnaloctime,&temp1,&temp2,&temprangeA,  &tempidA,&dtimeA,&dxA,&dyA,&temprangeB,&tempidB,&dtimeB,&dxB,&dyB);-->
      <publish>
        <moos_var>INCOMING_CNAPOS</moos_var>
        <format>CTIME=%1$.0lf,CID=%2%,CX=%3%,CY=%4%,CZ=%5%,CHDG=%6%,CRNGA=%7%,CRNGAID=%8%,CRNGA_DX=%9%,CRNGA_DY=%10%,CRNGB=%11%,CRNGBID=%12%,CRNGB_DX=%13%,CRNGBID_DX=%14%</format>
        <message_var>time</message_var>
        <message_var>vehicle_id</message_var>
        <message_var>nav_x</message_var>
        <message_var>nav_y</message_var>
        <message_var>depth</message_var>
        <message_var>hdg</message_var>
        <message_var>rangea</message_var>
        <message_var>rangeaid</message_var>
        <message_var>rangea_dx</message_var>
        <message_var>rangea_dy</message_var>
        <message_var>rangeb</message_var>
        <message_var>rangebid</message_var>
        <message_var>rangeb_dx</message_var>
        <message_var>rangeb_dy</message_var>
      </publish>
    </on_receipt>
	<queuing>
		<ack>false</ack>
	</queuing>
  </message>
</message_set>
